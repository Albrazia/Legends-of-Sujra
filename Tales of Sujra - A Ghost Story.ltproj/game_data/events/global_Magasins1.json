[
    {
        "name": "Magasins1",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [
            [
                "comment",
                [
                    "#Magasin du premier Sanctuaire"
                ]
            ],
            [
                "if",
                [
                    "{eval:{2}==1}"
                ]
            ],
            [
                "comment",
                [
                    "#Magasin Accessoire"
                ]
            ],
            [
                "table",
                [
                    "ArmeDescription",
                    "[\"{d:Accessoire1.{v:Accessoire_choice_hover}.description}\", \"Prix: {eval:DB.items.get('{v:Accessoire_choice_hover}').value.value}\"]",
                    "",
                    "(2, 1)",
                    "150",
                    "bottom_left",
                    "menu_bg_parchment (menu_bg_parchment)",
                    "FLAG(expression)"
                ]
            ],
            [
                "table",
                [
                    "GoldDisplay",
                    "[game.get_money()]",
                    "",
                    "",
                    "60",
                    "top_right",
                    "funds_display (funds_display)",
                    "FLAG(expression)"
                ]
            ],
            [
                "table",
                [
                    "InventoryDisplay",
                    "{eval:','.join([plop.nid for plop in game.get_unit('{1}').items])}",
                    "{1}",
                    "6,1",
                    "",
                    "bottom_right",
                    "",
                    "type_base_item",
                    "left"
                ]
            ],
            [
                "choice",
                [
                    "Accessoire",
                    "Acc. de l'Atelier",
                    "{eval:','.join([item.nid+'|'+item.name for item in game.get_data('Accessoire1')])}",
                    "",
                    "v",
                    "top_left",
                    "",
                    "",
                    "type_base_item",
                    "5,1",
                    "",
                    "FLAG(backable)"
                ]
            ],
            [
                "remove_table",
                [
                    "ArmeDescription"
                ]
            ],
            [
                "remove_table",
                [
                    "GoldDisplay"
                ]
            ],
            [
                "remove_table",
                [
                    "InventoryDisplay"
                ]
            ],
            [
                "if",
                [
                    "{eval:\"{v:Accessoire}\"!='BACK'}"
                ]
            ],
            [
                "if",
                [
                    "{eval:game.get_money()>=int({eval:DB.items.get('{v:Accessoire}').value.value})}"
                ]
            ],
            [
                "give_money",
                [
                    "{eval: -1 * int({eval:DB.items.get('{v:Accessoire}').value.value})}",
                    "FLAG(no_banner)"
                ]
            ],
            [
                "give_item",
                [
                    "{1}",
                    "{v:Accessoire}"
                ]
            ],
            [
                "else",
                []
            ],
            [
                "alert",
                [
                    "Vous n'avez pas assez de fonds."
                ]
            ],
            [
                "end",
                []
            ],
            [
                "end",
                []
            ],
            [
                "elif",
                [
                    "{eval:{2}==2}"
                ]
            ],
            [
                "comment",
                [
                    "#Magasin Arme"
                ]
            ],
            [
                "table",
                [
                    "ArmeDescription",
                    "[\"{d:Arme1.{v:Arme_choice_hover}.description}\", \"Prix: {eval:DB.items.get('{v:Arme_choice_hover}').value.value}\"]",
                    "",
                    "(2, 1)",
                    "150",
                    "bottom_left",
                    "menu_bg_parchment (menu_bg_parchment)",
                    "FLAG(expression)"
                ]
            ],
            [
                "table",
                [
                    "GoldDisplay",
                    "[game.get_money()]",
                    "",
                    "",
                    "60",
                    "top_right",
                    "funds_display (funds_display)",
                    "FLAG(expression)"
                ]
            ],
            [
                "table",
                [
                    "InventoryDisplay",
                    "{eval:','.join([plop.nid for plop in game.get_unit('{1}').items])}",
                    "{1}",
                    "6,1",
                    "",
                    "bottom_right",
                    "",
                    "type_base_item",
                    "left"
                ]
            ],
            [
                "choice",
                [
                    "Arme",
                    "Arme de l'Atelier",
                    "{eval:','.join([item.nid+'|'+item.name for item in game.get_data('Arme1')])}",
                    "",
                    "v",
                    "top_left",
                    "",
                    "",
                    "type_base_item",
                    "5,1",
                    "",
                    "FLAG(backable)"
                ]
            ],
            [
                "remove_table",
                [
                    "ArmeDescription"
                ]
            ],
            [
                "remove_table",
                [
                    "GoldDisplay"
                ]
            ],
            [
                "remove_table",
                [
                    "InventoryDisplay"
                ]
            ],
            [
                "if",
                [
                    "{eval:\"{v:Arme}\"!='BACK'}"
                ]
            ],
            [
                "if",
                [
                    "{eval:game.get_money()>=int({eval:DB.items.get('{v:Arme}').value.value})}"
                ]
            ],
            [
                "give_money",
                [
                    "{eval: -1 * int({eval:DB.items.get('{v:Arme}').value.value})}",
                    "FLAG(no_banner)"
                ]
            ],
            [
                "give_item",
                [
                    "{1}",
                    "{v:Arme}"
                ]
            ],
            [
                "else",
                []
            ],
            [
                "alert",
                [
                    "Vous n'avez pas assez de fonds."
                ]
            ],
            [
                "end",
                []
            ],
            [
                "end",
                []
            ],
            [
                "elif",
                [
                    "{eval:{2}==3}"
                ]
            ],
            [
                "comment",
                [
                    "#Magasin Armure"
                ]
            ],
            [
                "table",
                [
                    "ArmureDescription",
                    "[\"{d:Armure1.{v:Armure_choice_hover}.description}\", \"Prix: {eval:DB.items.get('{v:Armure_choice_hover}').value.value}\"]",
                    "",
                    "(2, 1)",
                    "150",
                    "bottom_left",
                    "menu_bg_parchment (menu_bg_parchment)",
                    "FLAG(expression)"
                ]
            ],
            [
                "table",
                [
                    "GoldDisplay",
                    "[game.get_money()]",
                    "",
                    "",
                    "60",
                    "top_right",
                    "funds_display (funds_display)",
                    "FLAG(expression)"
                ]
            ],
            [
                "table",
                [
                    "InventoryDisplay",
                    "{eval:','.join([plop.nid for plop in game.get_unit('{1}').items])}",
                    "{1}",
                    "6,1",
                    "",
                    "bottom_right",
                    "",
                    "type_base_item",
                    "left"
                ]
            ],
            [
                "choice",
                [
                    "Armure",
                    "Armure de l'Atelier",
                    "{eval:','.join([item.nid+'|'+item.name for item in game.get_data('Armure1')])}",
                    "",
                    "v",
                    "top_left",
                    "",
                    "",
                    "type_base_item",
                    "5,1",
                    "",
                    "FLAG(backable)"
                ]
            ],
            [
                "remove_table",
                [
                    "ArmureDescription"
                ]
            ],
            [
                "remove_table",
                [
                    "GoldDisplay"
                ]
            ],
            [
                "remove_table",
                [
                    "InventoryDisplay"
                ]
            ],
            [
                "if",
                [
                    "{eval:\"{v:Armure}\"!='BACK'}"
                ]
            ],
            [
                "if",
                [
                    "{eval:game.get_money()>=int({eval:DB.items.get('{v:Armure}').value.value})}"
                ]
            ],
            [
                "give_money",
                [
                    "{eval: -1 * int({eval:DB.items.get('{v:Armure}').value.value})}",
                    "FLAG(no_banner)"
                ]
            ],
            [
                "give_item",
                [
                    "{1}",
                    "{v:Armure}"
                ]
            ],
            [
                "else",
                []
            ],
            [
                "alert",
                [
                    "Vous n'avez pas assez de fonds."
                ]
            ],
            [
                "end",
                []
            ],
            [
                "end",
                []
            ],
            [
                "elif",
                [
                    "{eval:{2}==4}"
                ]
            ],
            [
                "comment",
                [
                    "#Magasin Wyvern"
                ]
            ],
            [
                "table",
                [
                    "SkillDescription",
                    "[\"{d:WyvernSkill1.{v:Wyvern_choice_hover}.description}\", \"Prix: {d:WyvernSkill1.{v:Wyvern_choice_hover}.cost}\"]",
                    "",
                    "(2, 1)",
                    "150",
                    "bottom_left",
                    "menu_bg_parchment (menu_bg_parchment)",
                    "FLAG(expression)"
                ]
            ],
            [
                "table",
                [
                    "GoldDisplay",
                    "[game.get_money()]",
                    "",
                    "",
                    "60",
                    "top_right",
                    "funds_display (funds_display)",
                    "FLAG(expression)"
                ]
            ],
            [
                "choice",
                [
                    "Wyvern",
                    "Equipement pour Wyvern",
                    "{eval:','.join([skill.nid+'|'+skill.name for skill in game.get_data('WyvernSkill1')])}",
                    "",
                    "v",
                    "top_left",
                    "",
                    "",
                    "type_skill",
                    "",
                    "",
                    "FLAG(scroll_bar)",
                    "FLAG(backable)"
                ]
            ],
            [
                "remove_table",
                [
                    "SkillDescription"
                ]
            ],
            [
                "remove_table",
                [
                    "GoldDisplay"
                ]
            ],
            [
                "if",
                [
                    "{eval:\"{v:Wyvern}\"!='BACK'}"
                ]
            ],
            [
                "if",
                [
                    "{game.game_vars.get('_last_choice')}"
                ]
            ],
            [
                "give_money",
                [
                    "{eval: -1 * int({d:WyvernSkill1.{v:Wyvern}.cost})}",
                    "FLAG(no_banner)"
                ]
            ],
            [
                "give_skill",
                [
                    "{1}",
                    "{eval:game.game_vars.get('_last_choice')}"
                ]
            ],
            [
                "end",
                []
            ],
            [
                "end",
                []
            ],
            [
                "elif",
                [
                    "{eval:{2}==5}"
                ]
            ],
            [
                "comment",
                [
                    "#Taverne de Shizuka"
                ]
            ],
            [
                "alert",
                [
                    "Shizuka"
                ]
            ],
            [
                "elif",
                [
                    "{eval:{2}==6}"
                ]
            ],
            [
                "comment",
                [
                    "#Wyvern Armes"
                ]
            ],
            [
                "table",
                [
                    "ArmeDescription",
                    "[\"{d:WyvernItem1.{v:Wyvern_choice_hover}.description}\", \"Prix: {eval:DB.items.get('{v:Wyvern_choice_hover}').value.value}\"]",
                    "",
                    "(2, 1)",
                    "150",
                    "bottom_left",
                    "menu_bg_parchment (menu_bg_parchment)",
                    "FLAG(expression)"
                ]
            ],
            [
                "table",
                [
                    "GoldDisplay",
                    "[game.get_money()]",
                    "",
                    "",
                    "60",
                    "top_right",
                    "funds_display (funds_display)",
                    "FLAG(expression)"
                ]
            ],
            [
                "table",
                [
                    "InventoryDisplay",
                    "{eval:','.join([plop.nid for plop in game.get_unit('{1}').items])}",
                    "{1}",
                    "6,1",
                    "65",
                    "bottom_right",
                    "",
                    "type_base_item",
                    "left"
                ]
            ],
            [
                "choice",
                [
                    "Wyvern",
                    "Armes de la Voli\u00e8re",
                    "{eval:','.join([item.nid+'|'+item.name for item in game.get_data('WyvernItem1')])}",
                    "",
                    "v",
                    "top_left",
                    "",
                    "",
                    "type_base_item",
                    "5,1",
                    "",
                    "FLAG(backable)"
                ]
            ],
            [
                "remove_table",
                [
                    "ArmureDescription"
                ]
            ],
            [
                "remove_table",
                [
                    "GoldDisplay"
                ]
            ],
            [
                "remove_table",
                [
                    "InventoryDisplay"
                ]
            ],
            [
                "if",
                [
                    "{eval:\"{v:Wyvern}\"!='BACK'}"
                ]
            ],
            [
                "if",
                [
                    "{eval:game.get_money()>=int({eval:DB.items.get('{v:Wyvern}').value.value})}"
                ]
            ],
            [
                "give_money",
                [
                    "{eval: -1 * int({eval:DB.items.get('{v:Wyvern}').value.value})}",
                    "FLAG(no_banner)"
                ]
            ],
            [
                "give_item",
                [
                    "{1}",
                    "{v:Wyvern}"
                ]
            ],
            [
                "else",
                []
            ],
            [
                "alert",
                [
                    "Vous n'avez pas assez de fonds."
                ]
            ],
            [
                "end",
                []
            ],
            [
                "end",
                []
            ],
            [
                "elif",
                [
                    "{eval:{2}==7}"
                ]
            ],
            [
                "comment",
                [
                    "#WagniusBaton"
                ]
            ],
            [
                "table",
                [
                    "ArmeDescription",
                    "[\"{d:WagniusBaton1.{v:Wagnius_choice_hover}.description}\", \"Prix: {eval:DB.items.get('{v:Wagnius_choice_hover}').value.value}\"]",
                    "",
                    "(2, 1)",
                    "150",
                    "bottom_left",
                    "menu_bg_parchment (menu_bg_parchment)",
                    "FLAG(expression)"
                ]
            ],
            [
                "table",
                [
                    "GoldDisplay",
                    "[game.get_money()]",
                    "",
                    "",
                    "60",
                    "top_right",
                    "funds_display (funds_display)",
                    "FLAG(expression)"
                ]
            ],
            [
                "table",
                [
                    "InventoryDisplay",
                    "{eval:','.join([plop.nid for plop in game.get_unit('{1}').items])}",
                    "{1}",
                    "6,1",
                    "65",
                    "bottom_right",
                    "",
                    "type_base_item",
                    "left"
                ]
            ],
            [
                "choice",
                [
                    "Wagnius",
                    "Armes de la Voli\u00e8re",
                    "{eval:','.join([item.nid+'|'+item.name for item in game.get_data('WagniusBaton1')])}",
                    "",
                    "v",
                    "top_left",
                    "",
                    "",
                    "type_base_item",
                    "5,1",
                    "",
                    "FLAG(backable)"
                ]
            ],
            [
                "remove_table",
                [
                    "ArmureDescription"
                ]
            ],
            [
                "remove_table",
                [
                    "GoldDisplay"
                ]
            ],
            [
                "remove_table",
                [
                    "InventoryDisplay"
                ]
            ],
            [
                "if",
                [
                    "{eval:\"{v:Wagnius}\"!='BACK'}"
                ]
            ],
            [
                "if",
                [
                    "{eval:game.get_money()>=int({eval:DB.items.get('{v:Wagnius}').value.value})}"
                ]
            ],
            [
                "give_money",
                [
                    "{eval: -1 * int({eval:DB.items.get('{v:Wagnius}').value.value})}",
                    "FLAG(no_banner)"
                ]
            ],
            [
                "give_item",
                [
                    "{1}",
                    "{v:Wagnius}"
                ]
            ],
            [
                "else",
                []
            ],
            [
                "alert",
                [
                    "Vous n'avez pas assez de fonds."
                ]
            ],
            [
                "end",
                []
            ],
            [
                "end",
                []
            ],
            [
                "end",
                []
            ]
        ],
        "only_once": false,
        "priority": 20
    }
]